---
const MAIN_SITE = "https://abhikr.site";
const BLOG_SITE = "https://blog.abhikr.site";
---

<nav
  class="fixed top-4 left-4 right-4 z-50 flex items-center justify-between px-4 py-2 rounded-2xl backdrop-blur-[30px] bg-white/30 dark:bg-black/30 border border-white/30 dark:border-white/20 shadow-lg shadow-black/10 dark:shadow-white/10 transition-all duration-300 text-black dark:text-white"
>
  <!-- LEFT -->
  <div class="flex items-center space-x-4">
    <!-- THEME TOGGLE -->
    <button
      id="theme-btn"
      class="h-10 w-10 rounded-full bg-white/20 dark:bg-black/20 flex items-center justify-center transition active:scale-95"
      aria-label="Toggle theme"
    >
      <svg
        id="sun"
        xmlns="http://www.w3.org/2000/svg"
        class="h-5 w-5 dark:hidden"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 3v1m0 16v1m8.66-8.66h-1M4.34 12H3m15.02 5.02l-.7-.7M6.68 6.68l-.7-.7m12.02 0l-.7.7M6.68 17.32l-.7.7M12 8a4 4 0 100 8 4 4 0 000-8z"
        ></path>
      </svg>
      <svg
        id="moon"
        xmlns="http://www.w3.org/2000/svg"
        class="hidden h-5 w-5 dark:block"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z"
        ></path>
      </svg>
    </button>

    <!-- SEARCH (DESKTOP) -->
    <div class="hidden md:flex items-center mx-4">
      <div class="relative w-[200px]">
        <input
          type="text"
          placeholder="Search..."
          class="pr-8 pl-3 py-2 w-full rounded-full bg-white/40 dark:bg-black/40 backdrop-blur-md border border-white/20 dark:border-white/10 text-black dark:text-white"
        />
        <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500">üîç</span>
      </div>
    </div>
  </div>

  <!-- CENTER MENU (DESKTOP) -->
  <div class="hidden md:flex space-x-4 backdrop-blur-md bg-white/10 border border-white/20 px-4 py-2 rounded-full">
    <a href={MAIN_SITE} class="px-4 py-2 rounded-full text-sm hover:bg-white/20 dark:hover:bg-black/20 transition">Home</a>
    <a href={BLOG_SITE} class="px-4 py-2 rounded-full text-sm hover:bg-white/20 dark:hover:bg-black/20 transition">Cyber Note</a>
    <a href={`${MAIN_SITE}/projects`} class="px-4 py-2 rounded-full text-sm hover:bg-white/20 dark:hover:bg-black/20 transition">Projects</a>
    <a href={`${MAIN_SITE}/friends`} class="px-4 py-2 rounded-full text-sm hover:bg-white/20 dark:hover:bg-black/20 transition">Friends</a>
  </div>

  <!-- RIGHT -->
  <div class="flex items-center space-x-3">
    <img
      src="https://res.cloudinary.com/dgu3gae6k/image/upload/v1759546975/abhikr_uvns8e.png"
      alt="Logo"
      class="h-8 w-8"
    />

    <button
      id="menu-btn"
      class="md:hidden h-10 w-10 rounded-full bg-white/20 dark:bg-black/20 flex items-center justify-center transition active:scale-95"
      aria-label="Open menu"
    >
      ‚ò∞
    </button>
  </div>
</nav>

<!-- MOBILE SIDEBAR -->
<div id="sidebar" class="hidden fixed inset-0 z-50 md:hidden">
  <div id="overlay" class="absolute inset-0 bg-black/40 backdrop-blur-md"></div>

  <aside
    class="relative w-72 h-full bg-white/30 dark:bg-black/30 backdrop-blur-[25px] p-6 space-y-4 border-r border-white/20 dark:border-white/10 rounded-r-2xl"
  >
    <div class="flex justify-between items-center">
      <h2 class="font-bold text-lg">Menu</h2>
      <button
        id="close-btn"
        class="h-9 w-9 rounded-full bg-white/20 dark:bg-black/20 flex items-center justify-center transition active:scale-95"
      >
        ‚úï
      </button>
    </div>

    <input
      type="text"
      placeholder="Search..."
      class="w-full px-3 py-2 rounded-full bg-white/40 dark:bg-black/40 border border-white/20 dark:border-white/10"
    />

    <nav class="flex flex-col space-y-3 pt-2">
      <a href={MAIN_SITE}>Home</a>
      <a href={BLOG_SITE}>Cyber Note</a>
      <a href={`${MAIN_SITE}/projects`}>Projects</a>
      <a href={`${MAIN_SITE}/friends`}>Friends</a>
    </nav>

    <div class="absolute bottom-4 text-sm opacity-60">AbhikrX</div>
  </aside>
</div>

<!-- CLIENT-SIDE SCRIPT -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const html = document.documentElement;

    const themeBtn = document.getElementById("theme-btn");
    const sidebar = document.getElementById("sidebar");
    const menuBtn = document.getElementById("menu-btn");
    const closeBtn = document.getElementById("close-btn");
    const overlay = document.getElementById("overlay");

    // THEME INIT
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "dark") html.classList.add("dark");
    else if (savedTheme === "light") html.classList.remove("dark");
    else html.classList.toggle("dark", window.matchMedia("(prefers-color-scheme: dark)").matches);

    // THEME TOGGLE
    if (themeBtn) {
      themeBtn.addEventListener("click", () => {
        const isDark = html.classList.toggle("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
      });
    }

    // SIDEBAR
    if (sidebar && menuBtn && closeBtn && overlay) {
      menuBtn.addEventListener("click", () => sidebar.classList.remove("hidden"));
      closeBtn.addEventListener("click", () => sidebar.classList.add("hidden"));
      overlay.addEventListener("click", () => sidebar.classList.add("hidden"));
    }
  });
</script>
